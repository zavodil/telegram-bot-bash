<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Bashobot Documentation - doc/2_usage.html</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Bashobot Documentation - doc/2_usage.html</h1>
</header>
<h4><a href="../README.html">Home</a></h4>
<h2>Getting Started</h2>
<p>The Bots default commands are in <code>commands.sh</code>. Do not edit this file! Instead copy <code>mycommands.sh.clean</code> to <code>mycommands.sh</code> and place you commands there. Have a look at <code>mycommands.sh.dist</code> for examples on how to write commands or overwrite existing ones. See <a href="5_practice.html">Best practices</a> for more information.</p>
<p>Once you're done with editing run the Bot with <code>./bashbot.sh start</code>. To stop running the Bot use <code>./bashbot.sh stop</code></p>
<p>If something doesn't work as expected, debug with <code>./bashbot.sh startbot DEBUG &amp;</code>, where DEBUG can be 'debug', 'xdebug' or 'xdebugx'. See <a href="7_develop.html">Bashbot Development</a> for more information.</p>
<p>To use the functions provided in this script in other scripts simply source bashbot: <code>source bashbot.sh source</code>. see <a href="8_expert.html">Expert Use</a></p>
<p>Have FUN!</p>
<hr />
<h3>Files</h3>
<pre><code>.
├── mycommands.sh        # THIS is your bot, place logic and commands here!
├── mycommands.conf      # place your bot config and bot messages here!
│
├── mycommands.conf.dist     # copy to &quot;mycommands.conf&quot; if not exist
├── mycommands.sh.clean      # copy to &quot;mycommands.sh&quot; to start developing a new bot
├── mycommands.sh.dist       # example bot, also used for testing bashbot internally 
│
├── count.jssh           # count bashbot usage in jssh key-value store
├── blocked.jssh         # list of blocked USER[ID] in jssh key-value store
│
├── bashbot.sh           # main bashbot script - DO NOT EDIT!
├── commands.sh          # command dispatcher - DO NOT EDIT!
├── JSON.sh              # bashbot JSON parsers
│   ├── JSON.sh              # sh implementation, https://github.com/dominictarr/JSON.sh
│   └── JSON.awk.dist        # faster awk version, https://github.com/step-/JSON.awk
│
├── bin                  # ready to use scripts, use `scriptname --help` for help
│   ├── bashbot_stats.sh         # does what it says ...
│   ├── send_broadcast.sh        # send message to all known chats
│   ├── send_message.sh          # send message to given chat
│   ├── edit_message.sh          # replace given message id in given chat
│   ├── send_file.sh             # send file to given chat
│   ├── delete_message.sh        # delete given message id in given chat
│   ├── send_buttons.sh          # send message with attached button
│   ├── edit_buttons.sh          # attach/edit message buttons
│   ├── kickban_user.sh          # kick/unban user from given chat
│   ├── promote_user.sh          # promote/dente user rights in given chat
│   │
│   ├── bashbot_env.inc.sh       # sourced from scripts, adapt locations if needed
│   └── bashbot_init.inc.sh      # sourced from bashbot.sh init
│
├── scripts              # place your bashbot interactive and background scripts here
│   └── interactive.sh.clean     # interactive script template for new scripts
│
├── logs                 # here you&#39;ll find BASHBOT, ERROR, DEBUG and MESSAGE.log
│
├── modules              # optional functions, sourced by commands.sh
│   ├── aliases.sh           # to disable modules rename them xxx.sh.off
│   ├── answerInline.sh
│   ├── background.sh        # interactive and background functions
│   ├── chatMember.sh        # manage chat mambers
│   ├── jsshDB.sh            # read and store JSON.sh style JSON, mandatory
│   ├── processUpdates.sh    # process updates from telegram, mandatory (run bot)
│   └── sendMessage.sh       # send message functions, mandatory
│
├── addons               # optional addons, disabled by default
│   ├── example.sh           # to enable addons change their XXX_ENABLE to true
│   └── antiFlood.sh         # simple addon taking actions based on # files and text sent to chat
│
├── bashbot.rc           # start/stop script if you run bashbot as service
│
├── examples             # example scripts and configs for bashbot
│   ├── README.md            # description of files and examples
│   ├── bash2env.sh          # script to convert shebang to /usr/bin/env, see [Security Considerations](../README.md#Security-Considerations)
│   └── bashbot.cron         # example crontab
│
├── doc                  # Documentation and License
├── html
├── LICENSE
├── README.html
├── README.md
└── README.txt

</code></pre>
<hr />
<h2>Managing your Bot</h2>
<h4>Note: running bashbot as root is highly danger and not recommended. See Expert use.</h4>
<h3>Start / Stop</h3>
<p>Start or Stop your Bot use the following commands:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="ex">./bashbot.sh</span> start</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="ex">./bashbot.sh</span> stop</span></code></pre></div>
<h3>Scripts in bin/</h3>
<p>Use <code>script.sh -h</code> or <code>script --help</code> to get short/long help for script.</p>
<p>To count the total number of users and messages run the following command:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a><span class="ex">bin/bashbot_stats.sh</span></span></code></pre></div>
<p>To send a broadcast to all of users that ever used the bot run the following command:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="ex">bin/send_broadcast.sh</span> <span class="st">&quot;Hey, I just wanted to let you know that the bot&#39;s been updated!&quot;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="ex">Sending</span> broadcast message to all users of Deal_O_Mat_bot</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="ex">DRY</span> RUN! use --doit as first argument to execute broadcast...</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="ex">...</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="ex">Message</span> <span class="st">&quot;Hey, ...&quot;</span> sent to xxx users.</span></code></pre></div>
<p>To send a message to one user or chat run the following command:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="ex">bin/send_message.sh</span> <span class="st">&quot;CHAT[ID]&quot;</span> <span class="st">&quot;Hey, I just wanted to let you know that the bot&#39;s been updated!&quot;</span></span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a>[<span class="st">&quot;OK&quot;</span>]  <span class="st">&quot;true&quot;</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>[<span class="st">&quot;ID&quot;</span>]  <span class="st">&quot;12345&quot;</span></span></code></pre></div>
<p>To replace a message already sent to one user or chat run the following command:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="ex">bin/edit_message.sh</span> <span class="st">&quot;CHAT[ID]&quot;</span> <span class="st">&quot;12345&quot;</span> <span class="st">&quot;Done!&quot;</span></span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>[<span class="st">&quot;OK&quot;</span>]  <span class="st">&quot;true&quot;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>[<span class="st">&quot;ID&quot;</span>]  <span class="st">&quot;12345&quot;</span></span></code></pre></div>
<p>To send a file to one user or chat run the following command:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a><span class="ex">bin/send_file.sh</span> <span class="st">&quot;CHAT[ID]&quot;</span> <span class="st">&quot;funny-pic.jpg&quot;</span> <span class="st">&quot;enjoy this picture&quot;</span></span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a>[<span class="st">&quot;OK&quot;</span>]  <span class="st">&quot;true&quot;</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>[<span class="st">&quot;ID&quot;</span>]  <span class="st">&quot;12346&quot;</span></span></code></pre></div>
<p>Note: to get help about a script in bin/ run <code>scriptname.sh --help</code></p>
<hr />
<h2>Receive data</h2>
<p>Evertime a Telegram update is received, you can read incoming data using the following variables: In case you need other update values, the array <code>UPD</code> contains complete Telegram response.</p>
<h3>Processing Messages</h3>
<p>If an update is received from Telegram, the message is pre processed by Bashbot and the following bash variables are set for use in <code>mycommands.sh</code>.</p>
<p>These variables are always present if a message is pre processed:</p>
<ul>
<li><p><code>${ME}</code>: Name of your bot</p></li>
<li><p><code>${BOTADMIN}</code>: User id of bot administrator</p></li>
<li><p><code>${MESSAGE}</code>: Current message text</p></li>
<li><p><code>${MESSAGE[ID]}</code>: ID of current message</p></li>
<li><p><code>$USER</code>: This array contains the First name, last name, username and user id of the sender of the current message.</p>
<ul>
<li><code>${USER[ID]}</code>: User id</li>
<li><code>${USER[FIRST_NAME]}</code>: User's first name</li>
<li><code>${USER[LAST_NAME]}</code>: User's last name</li>
<li><code>${USER[USERNAME]}</code>: Username</li>
</ul></li>
<li><p><code>$CHAT</code>: This array contains the First name, last name, username, title and user id of the chat of the current message.</p>
<ul>
<li><code>${CHAT[ID]}</code>: Chat id</li>
<li><code>${CHAT[FIRST_NAME]}</code>: Chat's first name</li>
<li><code>${CHAT[LAST_NAME]}</code>: Chat's last name</li>
<li><code>${CHAT[USERNAME]}</code>: Username</li>
<li><code>${CHAT[TITLE]}</code>: Title</li>
<li><code>${CHAT[TYPE]}</code>: Type</li>
<li><code>${CHAT[ALL_MEMBERS_ARE_ADMINISTRATORS]}</code>: All members are administrators (true if true)</li>
</ul></li>
</ul>
<p>The following variables are set if the message contains optional parts:</p>
<ul>
<li><code>MESSAGE[CAPTION]</code>: Picture, Audio, Video, File Captions</li>
<li><code>MESSAGE[DICE]</code>: Animated DICE Emoji DICE values is contained in <code>MESSAGE[RESULT]</code></li>
<li><code>$REPLYTO</code>: Original message which was replied to</li>
<li><code>$REPLYTO</code>: This array contains the First name, last name, username and user id of the ORIGINAL sender of the message REPLIED to.
<ul>
<li><code>${REPLYTO[ID]}</code>: ID of message which was replied to</li>
<li><code>${REPLYTO[UID]}</code>: Original user's id</li>
<li><code>${REPLYTO[FIRST_NAME]}</code>: Original user's first name</li>
<li><code>${REPLYTO[LAST_NAME]}</code>: Original user's' last name</li>
<li><code>${REPLYTO[USERNAME]}</code>: Original user's username</li>
</ul></li>
<li><code>$FORWARD</code>: This array contains the First name, last name, username and user id of the ORIGINAL sender of the FORWARDED message.
<ul>
<li><code>${FORWARD[ID]}</code>: Same as MESSAGE[ID] if message is forwarded</li>
<li><code>${FORWARD[UID]}</code>: Original user's id</li>
<li><code>${FORWARD[FIRST_NAME]}</code>: Original user's first name</li>
<li><code>${FORWARD[LAST_NAME]}</code>: Original user's' last name</li>
<li><code>${FORWARD[USERNAME]}</code>: Original user's username</li>
</ul></li>
<li><code>$URLS</code>: This array contains the <code>path</code> on Telegram server for files send to chat, e.g. photo, video, audio file.
<ul>
<li><code>${URLS[AUDIO]}</code>: Path to audio file</li>
<li><code>${URLS[VIDEO]}</code>: Path to video</li>
<li><code>${URLS[PHOTO]}</code>: Path to photo (maximum quality)</li>
<li><code>${URLS[VOICE]}</code>: Path to voice recording</li>
<li><code>${URLS[STICKER]}</code>: Path to sticker</li>
<li><code>${URLS[DOCUMENT]}</code>: Path to any other file <strong>Important:</strong> This is NOT a full URL, you must use <code>download_file "${URLS[xxx]}"</code> or prefix path with telegram api url for manual download (<em>e.g. <code>getJson "${URL}/${URLS[xxx]}" &gt;file</code></em>).</li>
</ul></li>
<li><code>$CONTACT</code>: This array contains info about contacts sent in a chat.
<ul>
<li><code>${CONTACT[ID]}</code>: User id</li>
<li><code>${CONTACT[NUMBER]}</code>: Phone number</li>
<li><code>${CONTACT[FIRST_NAME]}</code>: First name</li>
<li><code>${CONTACT[LAST_NAME]}</code>: Last name</li>
<li><code>${CONTACT[VCARD]}</code>: User's complete Vcard</li>
</ul></li>
<li><code>$LOCATION</code>: This array contains info about locations sent in a chat.
<ul>
<li><code>${LOCATION[LONGITUDE]}</code>: Longitude</li>
<li><code>${LOCATION[LATITUDE]}</code>: Latitude</li>
</ul></li>
<li><code>$VENUE</code>: This array contains info about venue (a place) sent in a chat.
<ul>
<li><code>${VENUE[TITLE]}</code>: Name of the place</li>
<li><code>${VENUE[ADDRESS]}</code>: Address of the place</li>
<li><code>${VENUE[LONGITUDE]}</code>: Longitude</li>
<li><code>${VENUE[LATITUDE]}</code>: Latitude</li>
<li><code>${VENUE[FOURSQUARE]}</code>: Fouresquare ID</li>
</ul></li>
</ul>
<h3>Service Messages</h3>
<p>Service Messages are updates not itended for end users, instead they signal special events in a chat, e.g. new users.</p>
<p>If a service message is received bashbot pre processing sets <code>${MESSAGE}</code> according to the service message type, e.g. if a new user joins a chat MESSAGE is set to <code>/_new_chat_user ...</code>.</p>
<ul>
<li><code>$SERVICE</code>: This array contains info about received service messages.
<ul>
<li><code>${SERVICE}</code>: "yes" if service message is received</li>
<li><code>${SERVICE[NEWMEMBER]}}</code>: New user's id
<ul>
<li><code>${MESSAGE}</code>: /_new_chat_member ID NAME</li>
<li><code>${NEWMEMBER[ID]}</code>: New user's id</li>
<li><code>${NEWMEMBER[FIRST_NAME]}</code>: New user's first name</li>
<li><code>${NEWMEMBER[LAST_NAME]}</code>: New user's last name</li>
<li><code>${NEWMEMBER[USERNAME]}</code>: New user's username</li>
<li><code>${NEWMEMBER[ISBOT]}</code>: New user is a bot</li>
</ul></li>
<li><code>${SERVICE[LEFTMEMBER]}</code>: Id of user left
<ul>
<li><code>${MESSAGE}</code>: /_left_chat_member ID NAME</li>
<li><code>${LEFTMEMBER[ID]}</code>: Left user's id</li>
<li><code>${LEFTMEMBER[FIRST_NAME]}</code>: Left user's first name</li>
<li><code>${LEFTMEMBER[LAST_NAME]}</code>: Left user's last name</li>
<li><code>${LEFTMEMBER[USERNAME]}</code>: Left user's username</li>
<li><code>${LEFTMEMBER[ISBOT]}</code>: Left user is a bot</li>
</ul></li>
<li><code>${SERVICE[NEWTITLE]}</code>: Text of new title
<ul>
<li><code>${MESSAGE}</code>: /_new_chat_title SENDER TEXT</li>
</ul></li>
<li><code>${SERVICE[NEWPHOTO]}</code>: New Chat Picture
<ul>
<li><code>${MESSAGE}</code>: /_new_chat_picture SENDER URL <strong>Important:</strong> SERVICE[NEWPHOTO] is NOT a full URL, you must use <code>download_file "${SERVICE[NEWPHOTO]}"</code> or prefix path with telegram api url for manual download (<em>e.g. <code>getJson "${FILEURL}/${SERVICE[NEWPHOTO]}" &gt;file</code></em>).</li>
</ul></li>
<li><code>${SERVICE[PINNED]}</code>: Pinned MESSAGE ID
<ul>
<li><code>${MESSAGE}</code>: /_new_pinned_message SENDER ID</li>
<li><code>${PINNED[ID]}</code>: Id of pinned message</li>
<li><code>${PINNED[MESSAGE]}</code>: Message text of pinned message</li>
</ul></li>
<li><code>${SERVICE[MIGRATE]}</code>: Old and new group id
<ul>
<li><code>${MESSAGE}</code>: /_migrate_group MIGRATE_FROM MIGRATE_TO</li>
<li><code>${MIGRATE[FROM]}</code>: Old group id</li>
<li><code>${MIGRATE[TO]}</code>: New group id</li>
</ul></li>
</ul></li>
</ul>
<h3>Inline query messages</h3>
<p>Inline query messages are special messages for direct interaction with your bot. If an user starts an inline conversation an inline query is sent after each user keystroke.</p>
<p>To receive inline messages you must set <code>inline=1</code> in <code>mycommands.conf</code> and in botfather. THe message contatains all characters so far typed from the user.</p>
<p>An received inline query must be anserwered with <code>answer_inline_query</code>, see also (Inline Query)[6_reference.md#inline-query]</p>
<p>If an inline query is received only the following variables are available:</p>
<ul>
<li><code>${iQUERY}</code>: Inline message typed so far by user</li>
<li><code>$iQUERY</code>: This array contains the ID, First name, last name, username and user id of the sender of the current inline query.
<ul>
<li><code>${iQUERY[ID]}</code>: Inline query ID</li>
<li><code>${iQUERY[USER_ID]}</code>: User's id</li>
<li><code>${iQUERY[FIRST_NAME]}</code>: User's first name</li>
<li><code>${iQUERY[LAST_NAME]}</code>: User's last name</li>
</ul></li>
</ul>
<h3>Callback button messages</h3>
<p>Callback button messages special messages swend from callback buttons, they contain the following variables only:</p>
<ul>
<li><code>$iBUTTON</code>: This array contains the ID, First name, last name, username and user id of the user clicked on the button
<ul>
<li><code>${iBUTTON[ID]}</code>: Callback query ID</li>
<li><code>${iBUTTON[DATA]</code>: Data attached to button, hopefully unique</li>
<li><code>${iBUTTON[CHAT_ID]</code>: Chat where button was pressed</li>
<li><code>${iBUTTON[MESSAGE_ID]</code>: Message to which button is attached</li>
<li><code>${iBUTTON[MESSAGE]</code>: Text of message</li>
<li><code>${iBUTTON[USER_ID]}</code>: User's id</li>
<li><code>${iBUTTON[FIRST_NAME]}</code>: User's first name</li>
<li><code>${iBUTTON[LAST_NAME]}</code>: User's last name</li>
<li><code>${iBUTTON[USERNAME]}</code>: User's @username</li>
</ul></li>
</ul>
<h2>Send data / get response</h2>
<p>After every <code>send_xxx</code> <code>get_xxx</code> call the array BOTSENT contains the most important values from Telegram response. In case you need other response values , the array <code>UPD</code> contains complete Telegram response.</p>
<p>You can use the array values to check if a commands was successful and get returned values from Telegram.</p>
<h3>BOTSENT array</h3>
<ul>
<li><code>$BOTSENT</code>: This array contains the parsed results from the last transmission to telegram.
<ul>
<li><code>${BOTSENT[OK]}</code>: contains the string <code>true</code>: after a successful transmission</li>
<li><code>${BOTSENT[ID]}</code>: Message ID of sent message, image, file etc., if OK is true</li>
<li><code>${BOTSENT[FILE_ID]}</code>: unique identifier returned for an uploaded file or URL</li>
<li><code>${BOTSENT[FILE_TYPE]}</code>: file type: photo, audio, video, sticker, voice, document</li>
</ul></li>
</ul>
<h2>Usage of bashbot functions</h2>
<h4>sending messages</h4>
<p>To send messages use the <code>send_xxx_message</code> functions. To insert line brakes in a message place <code>\n</code> in the text.</p>
<p>To send regular text without any markdown use:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1"></a><span class="ex">send_normal_message</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;lol&quot;</span></span></code></pre></div>
<p>To send text with markdown:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="ex">send_markdown_message</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;lol *bold*&quot;</span></span></code></pre></div>
<p>To send text with html:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1"></a><span class="ex">send_html_message</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;lol &lt;b&gt;bold&lt;/b&gt;&quot;</span></span></code></pre></div>
<p>To forward messages use the <code>forward</code> function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1"></a><span class="ex">forward</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;from_chat_id&quot;</span> <span class="st">&quot;message_id&quot;</span></span></code></pre></div>
<p>If your Bot is Admin in a Chat you can delete every message, if not you can delete only your messages. To delete a message with a known ${MESSAGE[ID]} you can simple use:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1"></a><span class="ex">delete_message</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">${MESSAGE[ID]}</span><span class="st">&quot;</span></span></code></pre></div>
<h4>send_message</h4>
<p>In addition there is a universal send_massage function which can output any type of message. This function is used to process output from external scrips like interactive chats or background jobs.<br />
<strong>For safety and performance reasons I recommend to use send_xxxx_message functions above for sending messages</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1"></a><span class="ex">send_message</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;lol&quot;</span></span></code></pre></div>
<p>To send html or markdown put the following strings before the text, depending on the parsing mode you want to enable:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1"></a><span class="ex">send_message</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;markdown_parse_mode lol *bold*&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1"></a><span class="ex">send_message</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;html_parse_mode lol &lt;b&gt;bold&lt;/b&gt;&quot;</span></span></code></pre></div>
<p>This function also allows a third parameter that disables additional function parsing (for safety use this when reprinting user input):</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1"></a><span class="ex">send_message</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;lol&quot;</span> <span class="st">&quot;safe&quot;</span></span></code></pre></div>
<p><strong>See also <a href="3_advanced.html">Interactive chats</a></strong></p>
<h4>Send files, locations, keyboards.</h4>
<p>To send local files or URL's (photo, video, voice, sticker, documents) use the <code>send_file</code> function.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1"></a><span class="ex">send_file</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;/home/user/dog.jpg&quot;</span> <span class="st">&quot;Lool&quot;</span> <span class="st">&quot;photo&quot;</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="ex">send_file</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;https://images-na.ssl-images-amazon.com/images/I/81DQ0FpoSNL._AC_SL1500_.jpg&quot;</span></span></code></pre></div>
<p>To send custom keyboards use the <code>send_keyboard</code> function:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1"></a><span class="ex">send_keyboard</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;Text that will appear in chat?&quot;</span> <span class="st">&#39;[ &quot;Yep&quot; , &quot;No&quot; ]&#39;</span> <span class="co"># note the single quotes!</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="ex">send_keyboard</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;Text that will appear in chat?&quot;</span> <span class="st">&quot;[ </span><span class="dt">\\</span><span class="st">&quot;</span>Yep<span class="dt">\\</span><span class="st">&quot; , </span><span class="dt">\\</span><span class="st">&quot;</span>No<span class="dt">\\</span><span class="st">&quot; ]&quot;</span> <span class="co"># within double quotes you must escape the inside double quots</span></span></code></pre></div>
<p>To send locations use the <code>send_location</code> function:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1"></a><span class="ex">send_location</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;Latitude&quot;</span> <span class="st">&quot;Longitude&quot;</span></span></code></pre></div>
<p>To send venues use the <code>send_venue</code> function:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1"></a><span class="ex">send_venue</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;Latitude&quot;</span> <span class="st">&quot;Longitude&quot;</span> <span class="st">&quot;Title&quot;</span> <span class="st">&quot;Address&quot;</span> <span class="st">&quot;optional foursquare id&quot;</span></span></code></pre></div>
<p>To send a chat action use the <code>send_action</code> function. Allowed values: typing for text messages, upload_photo for photos, record_video or upload_video for videos, record_audio or upload_audio for audio files, upload_document for general files, find_location for locations.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1"></a><span class="ex">send_action</span> <span class="st">&quot;</span><span class="va">${CHAT[ID]}</span><span class="st">&quot;</span> <span class="st">&quot;action&quot;</span></span></code></pre></div>
<p><strong>See also <a href="6_reference.html">Bashbot function reference</a></strong></p>
<h4><a href="1_firstbot.html">Prev Create Bot</a></h4>
<h4><a href="3_advanced.html">Next Advanced Usage</a></h4>
<h4>$$VERSION$$ v1.51-0-g6e66a28</h4>
</body>
</html>
